{% extends 'base.html' %}
{% load i18n %}
{% load markup %}
{% block title %}{{ tour.name }} | Tour | {{ block.super }}{% endblock %}
{% block extra-head %}

<script type="text/javascript" src="/site_media/js/slides/slides.min.jquery.js"></script>

<script>
    $(function(){
        $('#slides').slides({
            preload: true,
            preloadImage: '/site_media/js/slides/loading.gif',
            autoHeight: true,
            play: 4000,
            hoverPause: true,
            slideSpeed: 400,
            generatePagination: false
        });
    });
</script>

{% endblock %}

{% block content %}
<section class="span-24 last">
<article id="tour" class="{{ tour.slug }} views-{{ tour.view_count }}">
<header class="span-24 last">
<h1>{{ tour.name }}</h1>
</header>
<div class="span-16" id="tour-description">
    {{ tour.description|markdown }}
</div>
<div class="span-7 prepend-1 last">
    <h2>Ficha Técnica</h2>
    <ul>
        <li>
        <strong>Número de imagens:</strong> {{ tour.images.all|length }}
        </li>
        <li>
        <strong>Data de criação:</strong> {{ tour.pub_date }}
        </li>
        <li>
        <strong>Última modificação:</strong> {{ tour.timestamp }}
        </li>
        <li>
        <strong>Táxons representados:</strong> {% show_set taxa '' '' ', ' 'link' %}
        </li>
        <li>
        <strong>Marcadores presentes:</strong> {% show_set tags '' '' ', ' 'link' %}
        </li>
</div>

<div class="span-24 last" id="slides">
    <div class="span-1">
        <a href="#" class="prev"><img src="/site_media/js/slides/arrow-prev.png" width="24" height="43" alt="Anterior"></a>
    </div>
    <div class="slides_container shadow span-21">
        {% for media in tour.images.all %}
        <div class="span-21 eachslide last">
            <div class="span-13">
                {% include 'photo.html' %}
            </div>
            <div class="span-8 last">
                <h2>{{ media.title }}</h2>
                <p>{{ media.caption }}</p>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="span-1 last">
        <a href="#" class="next"><img src="/site_media/js/slides/arrow-next.png" width="24" height="43" alt="Próximo"></a>
    </div>

    <div class="span-24 last" id="paginator-container">
        <ul class="pagination">
            {% for media in tour.images.all %}
            <li>
            <a href="#"><img class="shadow" src="/{{ media.thumb_filepath }}" alt="{{ media.title }}" title="{{ media.title }}" /></a>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>

</article>
{% if references %}
<div class="span-24 last">
    <h2>{% trans 'Referências bibliográficas' %}</h2>
    {% for ref in references %}
    <div class="citation">
        {% autoescape off %}{{ ref.citation }}{% endautoescape %}
    </div>
    {% endfor %}
    </div>
</div>
{% endif %}
</section>
{% endblock %}

{% block sidebar %}
{% endblock %}
